(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69013c15"],{"63ca":function(e,t,a){},d568:function(e,t,a){"use strict";var r=a("63ca"),i=a.n(r);i.a},ff95:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main_box"},[a("span",{staticClass:"title_span"},[e._v("新增故障")]),a("div",{staticClass:"content_box"},[a("Form",{ref:"faultForm",attrs:{model:e.form_data,rules:e.fault_rules,"label-position":"right","label-width":80,inline:""}},[a("FormItem",{attrs:{label:"设备名称",prop:"device_id"}},[a("Select",{staticStyle:{width:"300px"},on:{"on-change":e.changeDevice},model:{value:e.form_data.device_id,callback:function(t){e.$set(e.form_data,"device_id",t)},expression:"form_data.device_id"}},e._l(e.deviceList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),a("div"),a("FormItem",{attrs:{label:"故障"}},[a("Input",{staticStyle:{width:"690px","font-size":"10px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请描述出现的故障"},model:{value:e.form_data.problem,callback:function(t){e.$set(e.form_data,"problem",t)},expression:"form_data.problem"}})],1),a("div"),a("FormItem",{attrs:{label:"解决方案"}},[a("Input",{staticStyle:{width:"690px","font-size":"10px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请描述解决的方案"},model:{value:e.form_data.solution,callback:function(t){e.$set(e.form_data,"solution",t)},expression:"form_data.solution"}})],1),a("div"),a("FormItem",{attrs:{label:"备注"}},[a("Input",{staticStyle:{width:"690px","font-size":"10px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:e.form_data.remark,callback:function(t){e.$set(e.form_data,"remark",t)},expression:"form_data.remark"}})],1)],1),a("Button",{staticStyle:{margin:"20px"},attrs:{type:"primary"},on:{click:e.saveFault}},[e._v("保存")])],1)])},i=[],n=(a("7f7f"),a("96cf"),a("1da1")),s={name:"add_fault",data:function(){return{form_data:{equipmentName:"",equipmentId:"",solution:"",problem:"",remark:""},deviceList:[],fault_rules:{device_id:[{required:!0,message:"请选择设备",trigger:"blur",pattern:/.+/}]},modalShow:!0}},mounted:function(){this.getAllDevice()},methods:{getAllDevice:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.device.getListAll();case 2:if(t=e.sent,a=t.err,r=t.data,!a){e.next=8;break}return this.$Message.error(a.message),e.abrupt("return");case 8:this.deviceList=r.data.map(function(e){return{label:e.equipmentName,value:e.id}});case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),saveFault:function(){var e=this;this.$refs["faultForm"].validate(function(t){t?e.addFault():e.$Message.error("请按要求输入")})},addFault:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={equipmentName:this.form_data.equipmentName,equipmentId:this.form_data.equipmentId,problem:this.form_data.problem,solution:this.form_data.solution,remark:this.form_data.remark},e.next=3,this.$service.fault.addFault(t);case 3:if(a=e.sent,r=a.err,i=a.data,!r){e.next=9;break}return this.$Message.error(r.message),e.abrupt("return");case 9:this.$Message.success(i.message),this.$router.push({name:"fault_list"});case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changeDevice:function(e){var t=this;this.deviceList.map(function(a){a.value===e&&(t.form_data.equipmentName=a.label,t.form_data.equipmentId=a.value)})},showModal:function(){this.$refs["modalShow"].show()},setCust:function(e){var t=this;t.form_data.name=e.name,t.form_data.contact=e.contact,t.form_data.address=e.address,t.form_data.phone=e.phone}}},o=s,u=(a("d568"),a("2877")),l=Object(u["a"])(o,r,i,!1,null,"2120e274",null);l.options.__file="add_fault.vue";t["default"]=l.exports}}]);
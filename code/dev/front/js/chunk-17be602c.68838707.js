(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17be602c"],{"0d82":function(e,t,a){"use strict";var r=a("92d0"),s=a.n(r);s.a},"330d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main_box"},[a("div",{staticClass:"top_box"}),a("div",{staticClass:"search_box"},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入关键词查询",search:""},on:{"on-search":e.getList},model:{value:e.filter_keyword,callback:function(t){e.filter_keyword=t},expression:"filter_keyword"}}),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.showAdd}},[e._v("新增权限")])],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("Table",{attrs:{border:"",columns:e.columns,data:e.per_list},scopedSlots:e._u([{key:"type",fn:function(t){var a=t.row;t.index;return[e._v("\n        "+e._s(1===a.type?"菜单":2===a.type?"功能":"")+"\n      ")]}},{key:"action",fn:function(t){var r=t.row;t.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"warning",size:"small"},on:{click:function(t){e.showEdit(r)}}},[e._v("编辑")]),a("Poptip",{attrs:{confirm:"",title:"确定删除?"},on:{"on-ok":function(t){e.remove(r)}}},[a("Button",{attrs:{type:"error",size:"small"}},[e._v("删除")])],1)]}}])}),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("Page",{attrs:{total:e.count,page:e.page,"page-size":e.page_size,"show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),a("Modal",{attrs:{"mask-closable":!1,title:e.isEdit?"编辑权限":"新增权限"},model:{value:e.modal_show,callback:function(t){e.modal_show=t},expression:"modal_show"}},[a("Form",{ref:"modalForm",attrs:{model:e.form_data,rules:e.per_rules,"label-width":80}},[a("FormItem",{attrs:{label:"权限名称",prop:"per_name"}},[a("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.form_data.per_name,callback:function(t){e.$set(e.form_data,"per_name",t)},expression:"form_data.per_name"}})],1),a("FormItem",{attrs:{label:"描述",prop:"per_desc"}},[a("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.form_data.per_desc,callback:function(t){e.$set(e.form_data,"per_desc",t)},expression:"form_data.per_desc"}})],1),a("FormItem",{attrs:{label:"权限类别",prop:"per_modal"}},[a("Select",{staticStyle:{width:"150px"},model:{value:e.form_data.per_modal,callback:function(t){e.$set(e.form_data,"per_modal",t)},expression:"form_data.per_modal"}},e._l(e.stateList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),1==e.form_data.per_modal?a("FormItem",{attrs:{label:"菜单路径",prop:"menu_id"}},[a("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.form_data.menu_id,callback:function(t){e.$set(e.form_data,"menu_id",t)},expression:"form_data.menu_id"}})],1):e._e(),2==e.form_data.per_modal?a("FormItem",{attrs:{label:"ID",prop:"id"}},[a("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.form_data.id,callback:function(t){e.$set(e.form_data,"id",t)},expression:"form_data.id"}})],1):e._e()],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.hideModal}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.saveBtn("modalForm")}}},[e._v("保存")])],1)],1)],1)},s=[],i=(a("7f7f"),a("96cf"),a("1da1")),n=(a("0a21"),{name:"permission",data:function(){return{modal_show:!1,isEdit:!1,filter_keyword:"",stateList:[{value:1,label:"菜单"},{value:2,label:"功能"}],form_data:{per_name:"",per_desc:"",per_modal:1,menu_id:"",id:""},per_rules:{per_name:[{required:!0,message:"请输入权限名称",trigger:"blur"}],per_desc:[{required:!0,message:"请输入权限描述",trigger:"blur"}],per_modal:[{required:!0,message:"请选择类别",trigger:"change",pattern:/.+/}],menu_id:[{required:!0,message:"请输入菜单路径",trigger:"blur"}],id:[{required:!0,message:"请输入ID",trigger:"blur"}]},count:0,page:1,page_size:10,columns:[{title:"权限名称",key:"name",align:"center"},{title:"权限描述",key:"description",align:"center"},{title:"权限类型",slot:"type",align:"center"},{title:"菜单路径",key:"id",align:"center"},{title:"操作",slot:"action",width:130}],per_list:[]}},mounted:function(){this.getList()},methods:{getList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={num:this.page,size:this.page_size,search:this.filter_keyword},this.loading=!0,e.next=4,this.$service.permission.getList(t);case 4:if(a=e.sent,r=a.err,s=a.data,this.loading=!1,!r){e.next=11;break}return this.$Message.error(r.message),e.abrupt("return");case 11:this.per_list=s.data.list,this.count=s.data.count;case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),showAdd:function(){this.modal_show=!0},saveBtn:function(e){var t=this;this.$refs[e].validate(function(e){e?t.isEdit?t.updatePermission():t.savePermission():t.$Message.error("请按要求输入")})},savePermission:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={name:this.form_data.per_name,description:this.form_data.per_desc,type:this.form_data.per_modal,id:""===this.form_data.menu_id?this.form_data.id:this.form_data.menu_id,en_visible:1},e.next=3,this.$service.permission.addPermission(t);case 3:if(a=e.sent,r=a.err,s=a.data,!r){e.next=9;break}return this.$Message.error(r.message),e.abrupt("return");case 9:this.$Message.success(s.message),this.modal_show=!1,this.clearModal(),this.getList();case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updatePermission:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={name:this.form_data.per_name,description:this.form_data.per_desc,type:this.form_data.per_modal,id:this.form_data.menu_id,en_visible:1},e.next=3,this.$service.permission.updatePermission(t);case 3:if(a=e.sent,r=a.err,s=a.data,!r){e.next=9;break}return this.$Message.error(r.message),e.abrupt("return");case 9:this.$Message.success(s.message),this.isEdit=!1,this.modal_show=!1,this.clearModal(),this.getList();case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),showEdit:function(e){this.isEdit=!0,this.form_data={per_name:e.name,per_desc:e.description,per_modal:e.type,menu_id:e.id},this.modal_show=!0},hideModal:function(){this.modal_show=!1,this.clearModal()},clearModal:function(){this.form_data={per_name:"",per_desc:"",per_modal:1,menu_id:""}},remove:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.permission.deletePer(t.id);case 2:if(a=e.sent,r=a.err,s=a.data,!r){e.next=8;break}return this.$Message.error(r.message),e.abrupt("return");case 8:this.$Message.success(s.message),this.getList();case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changePage:function(e){this.page=e,this.getList()},changePageSize:function(e){this.page=1,this.page_size=e,this.getList()}}}),o=n,l=(a("0d82"),a("2877")),d=Object(l["a"])(o,r,s,!1,null,null,null);d.options.__file="permission.vue";t["default"]=d.exports},"92d0":function(e,t,a){}}]);
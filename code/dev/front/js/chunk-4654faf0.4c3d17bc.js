(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4654faf0"],{"063c":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main_box"},[a("span",{staticClass:"title_span"},[t._v("新增设备")]),a("div",{staticClass:"content_box"},[a("Form",{ref:"mainForm",attrs:{rules:t.device_rules,model:t.form_data,"label-position":"right","label-width":80,inline:!0}},[a("FormItem",{attrs:{label:"设备名称",prop:"equipmentName"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.equipmentName,callback:function(e){t.$set(t.form_data,"equipmentName",e)},expression:"form_data.equipmentName"}})],1),a("FormItem",{attrs:{label:"设备类型",prop:"model"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.model,callback:function(e){t.$set(t.form_data,"model",e)},expression:"form_data.model"}})],1),a("FormItem",{attrs:{label:"品牌",prop:"brand"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.brand,callback:function(e){t.$set(t.form_data,"brand",e)},expression:"form_data.brand"}})],1),a("FormItem",{attrs:{label:"序列号"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.serialNumber,callback:function(e){t.$set(t.form_data,"serialNumber",e)},expression:"form_data.serialNumber"}})],1),a("FormItem",{attrs:{label:"客户名称",prop:"companyId"}},[a("Select",{staticStyle:{width:"300px"},attrs:{filterable:""},on:{"on-change":t.changeCustomer},model:{value:t.form_data.companyId,callback:function(e){t.$set(t.form_data,"companyId",e)},expression:"form_data.companyId"}},t._l(t.customerList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),a("FormItem",{attrs:{label:"安装地点",prop:"installationSite"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.installationSite,callback:function(e){t.$set(t.form_data,"installationSite",e)},expression:"form_data.installationSite"}})],1),a("FormItem",{attrs:{label:"运营商",prop:"operator"}},[a("Select",{staticStyle:{width:"300px"},model:{value:t.form_data.operator,callback:function(e){t.$set(t.form_data,"operator",e)},expression:"form_data.operator"}},t._l(t.operatorList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),a("FormItem",{attrs:{label:"带宽",prop:"bandwidth"}},[a("Select",{staticStyle:{width:"300px"},model:{value:t.form_data.bandwidth,callback:function(e){t.$set(t.form_data,"bandwidth",e)},expression:"form_data.bandwidth"}},t._l(t.bandwidthList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),a("FormItem",{attrs:{label:"VLAN",prop:"vlan"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.vlan,callback:function(e){t.$set(t.form_data,"vlan",e)},expression:"form_data.vlan"}})],1),a("FormItem",{attrs:{label:"单位接入路由",prop:"unitAccessRoute"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.unitAccessRoute,callback:function(e){t.$set(t.form_data,"unitAccessRoute",e)},expression:"form_data.unitAccessRoute"}})],1),a("FormItem",{attrs:{label:"县区汇聚路由",prop:"countyConvergenceRoute"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.countyConvergenceRoute,callback:function(e){t.$set(t.form_data,"countyConvergenceRoute",e)},expression:"form_data.countyConvergenceRoute"}})],1),a("FormItem",{attrs:{label:"管理地址",prop:"managemenAddress"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.managemenAddress,callback:function(e){t.$set(t.form_data,"managemenAddress",e)},expression:"form_data.managemenAddress"}})],1),a("FormItem",{attrs:{label:"业务网段范围",prop:"networkArea"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.networkArea,callback:function(e){t.$set(t.form_data,"networkArea",e)},expression:"form_data.networkArea"}})],1),a("FormItem",{attrs:{label:"网关",prop:"gateway"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.gateway,callback:function(e){t.$set(t.form_data,"gateway",e)},expression:"form_data.gateway"}})],1),a("FormItem",{attrs:{label:"共享单位",prop:"sharedUnits"}},[a("Input",{staticStyle:{width:"300px"},model:{value:t.form_data.sharedUnits,callback:function(e){t.$set(t.form_data,"sharedUnits",e)},expression:"form_data.sharedUnits"}})],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{staticStyle:{width:"300px","font-size":"10px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请描述出现的问题"},model:{value:t.form_data.remark,callback:function(e){t.$set(t.form_data,"remark",e)},expression:"form_data.remark"}})],1)],1),a("Button",{staticStyle:{margin:"20px"},attrs:{type:"primary"},on:{click:t.saveDevice}},[t._v("保存")])],1)])},n=[],o=(a("7f7f"),a("96cf"),a("1da1")),s=a("ade3"),i=a("ab80"),c={name:"index",components:{Customer:i["a"]},data:function(){var t;return{form_data:(t={equipmentName:"",brand:"",model:"",serialNumber:"",companyId:"",companyName:"",remark:"",solve:"0"},Object(s["a"])(t,"companyId",""),Object(s["a"])(t,"installationSite",""),Object(s["a"])(t,"operator",""),Object(s["a"])(t,"bandwidth",""),Object(s["a"])(t,"vlan",""),Object(s["a"])(t,"unitAccessRoute",""),Object(s["a"])(t,"countyConvergenceRoute",""),Object(s["a"])(t,"managemenAddress",""),Object(s["a"])(t,"networkArea",""),Object(s["a"])(t,"gateway",""),Object(s["a"])(t,"sharedUnits",""),t),operatorList:[],bandwidthList:[],customerList:[],device_rules:{equipmentName:[{required:!0,message:"设备名称不允许为空",trigger:"blur"}],companyId:[{required:!0,message:"请选择客户",trigger:"blur",pattern:/.+/}],model:[{required:!0,message:"型号不允许为空",trigger:"blur"}],brand:[{required:!0,message:"品牌不允许为空",trigger:"blur"}]},modalShow:!0}},mounted:function(){this.getAllCusttomer(),this.getOperatorList(),this.getBandwidthList()},methods:{getOperatorList:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,a,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={dmlb:"operator"},t.next=3,this.$service.order.getServer(e);case 3:if(a=t.sent,r=a.err,n=a.data,!r){t.next=9;break}return this.$Message.error(r.message),t.abrupt("return");case 9:this.operatorList=n.data.map(function(t){return{value:t.dmz,label:t.dmsm1}});case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getBandwidthList:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,a,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={dmlb:"bandwidth"},t.next=3,this.$service.order.getServer(e);case 3:if(a=t.sent,r=a.err,n=a.data,!r){t.next=9;break}return this.$Message.error(r.message),t.abrupt("return");case 9:this.bandwidthList=n.data.map(function(t){return{value:t.dmz,label:t.dmsm1}});case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getAllCusttomer:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$service.customer.getListAll();case 2:if(e=t.sent,a=e.err,r=e.data,!a){t.next=8;break}return this.$Message.error(a.message),t.abrupt("return");case 8:this.customerList=r.data.map(function(t){return{label:t.companyName,value:t.id}});case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),changeCustomer:function(t){var e=this;this.customerList.map(function(a){a.value===t&&(e.form_data.companyName=a.label,e.form_data.companyId=a.value)})},saveDevice:function(){var t=this;this.$refs["mainForm"].validate(function(e){e?t.addDevice():t.$Message.error("请按要求输入")})},addDevice:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,a,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={equipmentName:this.form_data.equipmentName,model:this.form_data.model,brand:this.form_data.brand,costomName:this.form_data.companyName,costomId:this.form_data.companyId,serialNumber:this.form_data.serialNumber,remark:this.form_data.remark,installationSite:this.form_data.installationSite,operator:this.form_data.operator,bandwidth:this.form_data.bandwidth,vlan:this.form_data.vlan,unitAccessRoute:this.form_data.unitAccessRoute,countyConvergenceRoute:this.form_data.countyConvergenceRoute,managemenAddress:this.form_data.managemenAddress,networkArea:this.form_data.networkArea,gateway:this.form_data.gateway,sharedUnits:this.form_data.sharedUnits},t.next=3,this.$service.device.addDevice(e);case 3:if(a=t.sent,r=a.err,n=a.data,!r){t.next=9;break}return this.$Message.error(r.message),t.abrupt("return");case 9:this.$Message.success(n.message),this.$router.push({name:"device_list"});case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),showModal:function(){this.$refs["modalShow"].show()},setCust:function(t){var e=this;e.form_data.name=t.name,e.form_data.contact=t.contact,e.form_data.address=t.address,e.form_data.phone=t.phone},goToAddDevice:function(){}}},l=c,m=(a("f130"),a("2877")),d=Object(m["a"])(l,r,n,!1,null,"71f0b0ba",null);d.options.__file="add_device.vue";e["default"]=d.exports},"3f53":function(t,e,a){},7292:function(t,e,a){"use strict";var r=a("3f53"),n=a.n(r);n.a},ab80:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{width:"600",title:"选择客户"},on:{"on-ok":t.ok},model:{value:t.show_modal,callback:function(e){t.show_modal=e},expression:"show_modal"}},[a("div",[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字查询..."},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("Button",{staticStyle:{"margin-left":"10px"}},[t._v("搜索")]),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[t._v("新增客户")])],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("Table",{ref:"modalTable",attrs:{border:"",columns:t.columns,data:t.customerList},scopedSlots:t._u([{key:"action",fn:function(e){e.row;var r=e.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.lookDetail(r)}}},[t._v("详情")])]}}])})],1)])},n=[],o={name:"customer",data:function(){var t=this;return{show_modal:!1,keyword:"",currentChoose:"",columns:[{width:60,title:"选择",key:"id",align:"center",render:function(e,a){var r=a.row.id,n=!1;n=t.currentChoose===r;var o=t;return e("div",[e("Radio",{props:{value:n},on:{"on-change":function(){o.currentChoose=r}}})])}},{title:"客户名称",key:"name",align:"center"},{title:"联系人",key:"contact",align:"center",width:80},{title:"联系电话",key:"phone",align:"center"},{title:"详细地址",key:"address",align:"center"},{title:"操作",slot:"action",align:"center",width:70}],customerList:[{id:"0",name:"市政府",contact:"李主任",phone:"0530-88888888",address:"中华路108号"},{id:"1",name:"市公安局",contact:"王科长",phone:"0530-88888888",address:"中华路118号"},{id:"2",name:"市交通局",contact:"李主任",phone:"0530-88888888",address:"中华路138号"}]}},methods:{show:function(){this.show_modal=!0},lookDetail:function(t){},ok:function(t){if(this.currentChoose){var e=this.customerList[this.currentChoose];this.$emit("setCustomer",e)}else this.$Message.error("请选择客户")}}},s=o,i=(a("7292"),a("2877")),c=Object(i["a"])(s,r,n,!1,null,"25f3fd9a",null);c.options.__file="customer.vue";e["a"]=c.exports},f130:function(t,e,a){"use strict";var r=a("ffdc"),n=a.n(r);n.a},ffdc:function(t,e,a){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ef9d373"],{"4db8":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main_box"},[i("div",{staticClass:"top_box"}),i("div",{staticClass:"search_box"},[i("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入关键词查询",search:""},on:{"on-search":e.getList},model:{value:e.filter_keyword,callback:function(t){e.filter_keyword=t},expression:"filter_keyword"}}),e.btnList.indexOf("btn_addDevice")>-1?i("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.goAddDevice}},[e._v("新增设备")]):e._e(),i("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",loading:e.exportLoading},on:{click:e.exportExcel}},[e._v("导出EXCEL")])],1),i("div",{staticStyle:{"margin-top":"20px"}},[i("Table",{attrs:{border:"",loading:e.loading,columns:e.columns,data:e.device_list},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.row;t.index;return[-1!=e.btnList.indexOf("btn_editDevice")?i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"warning",size:"small"},on:{click:function(t){e.editDevice(r)}}},[e._v("编辑")]):e._e(),i("Poptip",{attrs:{confirm:"",title:"确定删除此设备"},on:{"on-ok":function(t){e.remove(r)}}},[-1!=e.btnList.indexOf("btn_deleteDevice")?i("Button",{attrs:{type:"error",size:"small"}},[e._v("删除")]):e._e()],1)]}}])}),i("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[i("Page",{attrs:{total:e.count,page:e.page,"page-size":e.page_size,"show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),i("Modal",{attrs:{"mask-closable":!1,width:"800",title:"编辑设备"},model:{value:e.device_show,callback:function(t){e.device_show=t},expression:"device_show"}},[i("Form",{ref:"deviceForm",attrs:{inline:"",model:e.editDeviceForm,rules:e.editDeviceRules,"label-width":80,inline:!0}},[i("FormItem",{attrs:{label:"设备名称",prop:"edit_equipmentName"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_equipmentName,callback:function(t){e.$set(e.editDeviceForm,"edit_equipmentName",t)},expression:"editDeviceForm.edit_equipmentName"}})],1),i("FormItem",{attrs:{label:"设备类型",prop:"edit_model"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_model,callback:function(t){e.$set(e.editDeviceForm,"edit_model",t)},expression:"editDeviceForm.edit_model"}})],1),i("FormItem",{attrs:{label:"品牌",prop:"edit_brand"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_brand,callback:function(t){e.$set(e.editDeviceForm,"edit_brand",t)},expression:"editDeviceForm.edit_brand"}})],1),i("FormItem",{attrs:{label:"序列号"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_serialNumber,callback:function(t){e.$set(e.editDeviceForm,"edit_serialNumber",t)},expression:"editDeviceForm.edit_serialNumber"}})],1),i("FormItem",{attrs:{label:"客户名称",prop:"edit_costomId"}},[i("Select",{staticStyle:{width:"390px"},attrs:{filterable:""},on:{"on-change":e.changeCustomer},model:{value:e.editDeviceForm.edit_costomId,callback:function(t){e.$set(e.editDeviceForm,"edit_costomId",t)},expression:"editDeviceForm.edit_costomId"}},e._l(e.customerList,function(t){return i("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.companyName))])}))],1),i("FormItem",{attrs:{label:"安装地点"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_installationSite,callback:function(t){e.$set(e.editDeviceForm,"edit_installationSite",t)},expression:"editDeviceForm.edit_installationSite"}})],1),i("FormItem",{attrs:{label:"运营商",prop:"operator"}},[i("Select",{staticStyle:{width:"150px"},model:{value:e.editDeviceForm.edit_operator,callback:function(t){e.$set(e.editDeviceForm,"edit_operator",t)},expression:"editDeviceForm.edit_operator"}},e._l(e.operatorList,function(t){return i("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),i("FormItem",{attrs:{label:"带宽",prop:"bandwidth"}},[i("Select",{staticStyle:{width:"150px"},model:{value:e.editDeviceForm.edit_bandwidth,callback:function(t){e.$set(e.editDeviceForm,"edit_bandwidth",t)},expression:"editDeviceForm.edit_bandwidth"}},e._l(e.bandwidthList,function(t){return i("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),i("FormItem",{attrs:{label:"VLAN"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_vlan,callback:function(t){e.$set(e.editDeviceForm,"edit_vlan",t)},expression:"editDeviceForm.edit_vlan"}})],1),i("FormItem",{attrs:{label:"单位接入路由"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_unitAccessRoute,callback:function(t){e.$set(e.editDeviceForm,"edit_unitAccessRoute",t)},expression:"editDeviceForm.edit_unitAccessRoute"}})],1),i("FormItem",{attrs:{label:"县区汇聚路由"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_countyConvergenceRoute,callback:function(t){e.$set(e.editDeviceForm,"edit_countyConvergenceRoute",t)},expression:"editDeviceForm.edit_countyConvergenceRoute"}})],1),i("FormItem",{attrs:{label:"管理地址"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_managemenAddress,callback:function(t){e.$set(e.editDeviceForm,"edit_managemenAddress",t)},expression:"editDeviceForm.edit_managemenAddress"}})],1),i("FormItem",{attrs:{label:"业务网段范围"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_networkArea,callback:function(t){e.$set(e.editDeviceForm,"edit_networkArea",t)},expression:"editDeviceForm.edit_networkArea"}})],1),i("FormItem",{attrs:{label:"网关"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_gateway,callback:function(t){e.$set(e.editDeviceForm,"edit_gateway",t)},expression:"editDeviceForm.edit_gateway"}})],1),i("FormItem",{attrs:{label:"共享单位"}},[i("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.editDeviceForm.edit_sharedUnits,callback:function(t){e.$set(e.editDeviceForm,"edit_sharedUnits",t)},expression:"editDeviceForm.edit_sharedUnits"}})],1),i("FormItem",{attrs:{label:"备注",prop:"edit_remark"}},[i("Input",{staticStyle:{width:"390px","font-size":"10px"},attrs:{clearable:"",type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请描述出现的问题"},model:{value:e.editDeviceForm.edit_remark,callback:function(t){e.$set(e.editDeviceForm,"edit_remark",t)},expression:"editDeviceForm.edit_remark"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:e.hideDeviceModal}},[e._v("取消")]),i("Button",{attrs:{type:"primary"},on:{click:e.saveDevice}},[e._v("确定")])],1)],1)],1)},a=[],n=i("be94"),s=(i("96cf"),i("1da1")),o=i("0a21"),d={name:"device_list",data:function(){return{loading:!1,filter_keyword:"",device_show:!1,editDeviceForm:{edit_equipmentName:"",edit_model:"",edit_brand:"",edit_serialNumber:"",edit_remark:"",edit_costomId:"",edit_costomName:"",edit_installationSite:"",edit_operator:"",edit_bandwidth:"",edit_vlan:"",edit_unitAccessRoute:"",edit_countyConvergenceRoute:"",edit_managemenAddress:"",edit_networkArea:"",edit_gateway:"",edit_sharedUnits:""},btnList:[],operatorList:[],bandwidthList:[],columns:[{title:"设备名称",key:"equipmentName",align:"center",fixed:"left",width:120},{title:"设备类型",key:"model",align:"center",width:120},{title:"品牌",key:"brand",align:"center",width:120},{title:"序列号",key:"serialNumber",align:"center",width:130},{title:"所属客户",key:"costomName",align:"center",width:130},{title:"安装地点",key:"installationSite",align:"center",width:130},{title:"运营商",key:"operator",align:"center",width:130},{title:"带宽",key:"bandwidth",align:"center",width:130},{title:"VLAN",key:"vlan",align:"center",width:130},{title:"单位接入路由",key:"unitAccessRoute",align:"center",width:130},{title:"县区汇聚路由",key:"countyConvergenceRoute",align:"center",width:130},{title:"管理地址",key:"managementAddress",align:"center",width:130},{title:"业务网段范围",key:"networkArea",align:"center",width:130},{title:"网关",key:"gateway",align:"center",width:130},{title:"共享单位",key:"sharedUnits",align:"center",width:130},{title:"备注",key:"remark",align:"center",width:130},{title:"操作",slot:"action",width:130,fixed:"right"}],editDeviceRules:{edit_equipmentName:[{required:!0,message:"设备名称不允许为空",trigger:"blur"}],edit_model:[{required:!0,message:"型号不允许为空",trigger:"blur"}],edit_costomId:[{required:!0,message:"请选择客户",trigger:"blur",pattern:/.+/}],edit_brand:[{required:!0,message:"品牌不允许为空",trigger:"blur"}]},customerList:[],device_list:[],count:1,page:1,page_size:10,exportLoading:!1}},mounted:function(){this.getList(),this.getAllCusttomer(),this.getOperatorList(),this.getBandwidthList()},methods:{getOperatorList:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={dmlb:"operator"},e.next=3,this.$service.order.getServer(t);case 3:if(i=e.sent,r=i.err,a=i.data,!r){e.next=9;break}return this.$Message.error(r.message),e.abrupt("return");case 9:this.operatorList=a.data.map(function(e){return{value:e.dmz,label:e.dmsm1}});case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getBandwidthList:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={dmlb:"bandwidth"},e.next=3,this.$service.order.getServer(t);case 3:if(i=e.sent,r=i.err,a=i.data,!r){e.next=9;break}return this.$Message.error(r.message),e.abrupt("return");case 9:this.bandwidthList=a.data.map(function(e){return{value:e.dmz,label:e.dmsm1}});case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getAllCusttomer:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.customer.getListAll();case 2:if(t=e.sent,i=t.err,r=t.data,!i){e.next=8;break}return this.$Message.error(i.message),e.abrupt("return");case 8:this.customerList=r.data;case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changeCustomer:function(e){var t=this;this.customerList.map(function(i){i.value===e&&(t.editDeviceForm.edit_companyName=i.companyName,t.editDeviceForm.edit_costomId=i.id)})},getList:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={search:this.filter_keyword,num:this.page,size:this.page_size},this.loading=!0,e.next=4,this.$service.device.getList(t);case 4:if(i=e.sent,r=i.err,a=i.data,this.loading=!1,!r){e.next=11;break}return this.$Message.error(r.message),e.abrupt("return");case 11:this.device_list=a.data.list,this.count=a.data.count,this.btnList=sessionStorage.getItem("btnList");case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changePage:function(e){this.page=e,this.getList()},changePageSize:function(e){this.page=1,this.page_size=e,this.getList()},remove:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.device.deleteEquipment(t.id);case 2:if(i=e.sent,r=i.err,i.data,!r){e.next=8;break}return this.$Message.error(r.message),e.abrupt("return");case 8:this.getList();case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),saveDevice:function(){var e=this;this.$refs["deviceForm"].validate(function(t){t?e.addDevice():e.$Message.error("请按要求输入")})},addDevice:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={id:this.editDeviceForm.id,equipmentName:this.editDeviceForm.equipmentName,model:this.editDeviceForm.model,brand:this.editDeviceForm.brand,costomName:this.editDeviceForm.companyName,costomId:this.editDeviceForm.costomId,serialNumber:this.editDeviceForm.serialNumber,remark:this.editDeviceForm.remark,installationSite:this.edit_installationSite,operator:this.edit_operator,bandwidth:this.edit_bandwidth,vlan:this.edit_vlan,unitAccessRoute:this.edit_unitAccessRoute,countyConvergenceRoute:this.edit_countyConvergenceRoute,managemenAddress:this.edit_managemenAddress,networkArea:this.edit_networkArea,gateway:this.edit_gateway,sharedUnits:this.edit_sharedUnits},e.next=3,this.$service.device.updateList(t);case 3:if(i=e.sent,r=i.err,i.data,!r){e.next=9;break}return this.$Message.error(r.message),e.abrupt("return");case 9:this.$Message.success("Success!"),this.device_show=!1;case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),editDevice:function(e){this.device_show=!0,this.editDeviceForm=Object(n["a"])({},e,{edit_equipmentName:e.equipmentName,edit_model:e.model,edit_brand:e.brand,edit_serialNumber:e.serialNumber,edit_remark:e.remark,edit_costomId:e.costomId,edit_costomName:e.costomName,edit_installationSite:e.installationSite,edit_operator:e.operator,edit_bandwidth:e.bandwidth,edit_vlan:e.vlan,edit_unitAccessRoute:e.unitAccessRoute,edit_countyConvergenceRoute:e.countyConvergenceRoute,edit_managemenAddress:e.managemenAddress,edit_networkArea:e.networkArea,edit_gateway:e.gateway,edit_sharedUnits:e.sharedUnits})},hideDeviceModal:function(){this.device_show=!1,this.clearModal()},clearModal:function(){this.editDeviceForm={edit_equipmentName:"",edit_model:"",edit_brand:"",edit_serialNumber:"",edit_remark:""}},goAddDevice:function(){this.$router.push({path:"/device/add_device"})},exportExcel:function(){if(this.device_list.length){this.exportLoading=!0;var e=this.columns.map(function(e){if(e.key)return e.title}).filter(function(e){return void 0!=e}),t=this.columns.map(function(e){if(e.key)return e.key}).filter(function(e){return void 0!=e}),i=this.device_list,r={title:e,key:t,data:i,autoWidth:!0,filename:"设备列表"};o["a"].export_array_to_excel(r),this.exportLoading=!1}else this.$Message.info("表格数据不能为空！")}}},c=d,l=(i("eaa4"),i("2877")),m=Object(l["a"])(c,r,a,!1,null,null,null);m.options.__file="device_list.vue";t["default"]=m.exports},9426:function(e,t,i){},eaa4:function(e,t,i){"use strict";var r=i("9426"),a=i.n(r);a.a}}]);
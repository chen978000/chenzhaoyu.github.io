<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>水发紫光大数据</title>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script src="./js/echarts.min.js"></script>
  <script src="./js/formdate.js"></script>
  <link rel="stylesheet" href="./css/index.css">
</head>
<body>
  <div id="app">
    <h3 class="title_box">智慧城市运营中心</h3>
    <div class="top_left">
      <div class="top_left_item">
        <img class="cloud_img" src="./img/cloud.png" alt="">
        <span>26℃</span>
      </div>
      <div class="top_left_item">
        <span :class="{top_left_item_current: currentPage==1}">政务服务</span>
      </div>
      <div class="top_left_item">
        <span>经济运行</span>
      </div>
      <div class="top_left_item">
        <span>民生舆论</span>
      </div>

    </div>
    <div class="top_right">
      <div class="top_right_item">
        <span>气象</span>
      </div>
      <div class="top_right_item">
        <span>环保</span>
      </div>
      <div class="top_right_item">
        <span>重大项目</span>
      </div>
      <div class="top_right_item date_box_item">
        <div class="time_span">{{now_time}}</div>
        <div>{{now_date}}</div>
      </div>
    </div>
    <div class="main_box">
      <div class="main_item_box main_one_box">
        <div class="main_title_box main_color">今年累计取号量及当日取号情况</div>
        <div class="main_one_son_box">
          <div class="main_one_son_item_box color_white">
            <span>5412</span>
            <div>今日取号量</div>
          </div>
          <div class="main_one_son_item_box color_white">
            <span>56</span>
            <div>正在办理量</div>
          </div>
          <div class="main_one_son_item_box color_white">
            <span>156</span>
            <div>当前等待量</div>
          </div>
        </div>
      </div>
      <div class="main_item_box main_two_box">
        <img class="float_left" src="./img/map.png" alt="">
        <div class="age_box float_left color_white">
          <div class="age_title_box">区县办理量</div>
          <div class="age_main_item" v-for="item in age_list">
            <span>{{item.name}}</span>
            <span class="age_line" :style="{width: item.value+'%'}"></span>
            <span>{{item.total}}</span>
          </div>
        </div>
      </div>
      <div class="main_item_box main_three_box">
        <div class="main_three_title_box">电子证照</div>
        <div class="E_port_box">
          <span class="E_port_name_span">电子证照量</span>
          <span class="E_port_num_span">862</span>
          <span class="up_span">↑</span>
        </div>
        <div class="E_port_box">
          <span class="E_port_name_span port_rate">证照覆盖率</span>
          <span class="E_port_num_span port_rate_num">81%</span>
          <!--<span class="up_span">↑</span>-->
        </div>
        <div class="E_port_box">
          <span class="E_port_name_span port_kind">证照类型</span>
          <span class="E_port_num_span port_kind_num">165</span>
          <span class="up_span">↑</span>
        </div>
        <div id="chart_box" style="width: 90%;height:160px;"></div>
      </div>
    </div>
    <div class="main_box">
      <div class="main_item_box main_three_box">
        <div id="chart_box2" style="width: 100%;height:260px;"></div>
      </div>
      <div class="main_item_box main_three_box">
        <div id="chart_box3" style="width: 100%;height:260px;"></div>
      </div>
      <div class="main_item_box main_three_box">
        <div id="chart_box4" style="width: 90%;height:240px;"></div>
      </div>
      <div class="main_item_box main_three_box">
        <div id="chart_box5" style="width: 100%;height:260px;"></div>
      </div>
    </div>
  </div>
  <script>
    new Vue({
      el: '#app',
      data: {
        currentPage: 1,
        now_time: '',
        now_date: '',
        age_list: [
          {
            name: '牡丹区',
            value: 47,
            total: 1564
          },
          {
            name: '定陶',
            value: 43,
            total: 1364
          },
          {
            name: '曹县',
            value: 35,
            total: 864
          },
          {
            name: '鄄城',
            value: 32,
            total: 764
          },
          {
            name: '郓城',
            value: 26,
            total: 564
          },
        ]
      },
      methods:{
        getNow(){
          let date = new Date().Format('yyyy年MM月dd日');
          let time = new Date().Format('HH:mm:ss');
          this.now_date = date;
          this.now_time = time;
        },
        createChart(){
          var myChart = echarts.init(document.getElementById('chart_box'));
          var option = {
            color:['#3398DB'],
            title: {
              text: '电子证照种类部门TOP10（个）',	// '注册转化漏斗(总体转化率10%)',
              left:'center',
              textStyle:{
                color:'#22AAC0',
                fontSize: 12
              },
              top:20
            },
            tooltip: {
              trigger: 'axis',
              axisPointer: {
                type: 'shadow'
              },
              // show: false

            },
            legend: {
              data: ['种类数'], //['用户数']
              top:30,
              show: false
            },
            grid: {
              left: '1%',
              right: '1%',
              bottom: '3%',
              containLabel: true
            },
            xAxis: {
              type: 'value',
              boundaryGap: [0, 0.01],
              show: false
            },
            yAxis: {
              type: 'category',
              data: ['交通运输局','公安局','农资','海洋局'],
              nameTextStyle:{
                color: ['#fff']
              }
            },
            axisLine: {
              lineStyle: {
                color:'#fff'
              }
            },
            series: [
              {
                name: '种类数', 	//'用户数',
                barWidth: 10,		//设置柱子宽度
                type: 'bar',
                data: [6527,9952,12621,15221], //[ 104970, 131744, 630230]
              }
            ]
          };
          myChart.setOption(option);
        },
        createChart2(){
          var myChart = echarts.init(document.getElementById('chart_box2'));
          option = {
            title: {
              text: '大厅取号量月走势图',
              // left:'center',
              textStyle:{
                color:'#22AAC0',
                fontSize: 12
              },
              top:20
            },
            tooltip: {
              trigger: 'axis',
              axisPointer: {
                type: 'shadow'
              },
            },
            xAxis: {
              type: 'category',
              data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月','11月', '12月']
            },
            yAxis: {
              type: 'value'
            },
            series: [{
              data: [12820, 7802, 11932, 934, 0, 0, 0,0,0,0,0,0],
              type: 'line'
            }]
          };
          myChart.setOption(option);
        },
        createChart3(){
          var myChart = echarts.init(document.getElementById('chart_box3'));
          option = {
            title: {
              text: '大厅办件量月走势图',
              // left:'center',
              textStyle:{
                color:'#22AAC0',
                fontSize: 12
              },
              top:20
            },
            tooltip: {
              trigger: 'axis',
              axisPointer: {
                type: 'shadow'
              },
            },
            xAxis: {
              type: 'category',
              data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月','11月', '12月']
            },
            yAxis: {
              type: 'value'
            },
            series: [{
              data: [7421, 7802, 4632, 8934, 1210, 9670, 0,0,0,0,0,0],
              type: 'line',
              lineStyle: {
                normal: {
                  color: '#22AAC0'
                }
              }
            }]
          };
          myChart.setOption(option);
        },
        createChart4(){
          var myChart = echarts.init(document.getElementById('chart_box4'));
          option = {
            title : {
              text: '评价满意度公示',
              left:'center',
              textStyle:{
                color:'#22AAC0',
                fontSize: 12
              },
              top:20
            },
            tooltip : {
              trigger: 'item',
              formatter: "{a} <br/>{b} : {c} ({d}%)",
              show: false
            },
            legend: {
              // orient: 'vertical',
              y: 'bottom',
              data:['非常满意','满意','基本满意','不满意','非常不满意',]
            },
            toolbox: {
              show : true,
              feature : {
                mark : {show: true},
                dataView : {show: true, readOnly: false},
                magicType : {
                  show: true,
                  type: ['pie', 'funnel']
                },
                restore : {show: true},
                saveAsImage : {show: true}
              }
            },
            calculable : true,
            series : [
              {
                name:'满意度',
                type:'pie',
                radius: ['35%', '55%'],
                avoidLabelOverlap: false,
                label: {
                  normal: {
                    show: false,
                    position: 'center'
                  },
                  emphasis: {
                    show: true,
                    textStyle: {
                      fontSize: '30',
                      fontWeight: 'bold'
                    }
                  }
                },
                labelLine: {
                  normal: {
                    show: false
                  }
                },
                data:[
                  {value:80.9, name:'非常满意'},
                  {value:9.1, name:'满意'},
                  {value:5.3, name:'基本满意'},
                  {value:2.5, name:'不满意'},
                  {value:1.2, name:'非常不满意'}
                ]
              }
            ]
          };

          myChart.setOption(option);
        },
        createChart5(){
          var myChart = echarts.init(document.getElementById('chart_box5'));
          option = {
            title: {
              text: '主干道车流量（辆/分钟）',	// '注册转化漏斗(总体转化率10%)',
              left:'center',
              textStyle:{
                color:'#22AAC0',
                fontSize: 12
              },
              top:20
            },
            tooltip : {
              formatter: "{a} <br/>{c} {b}"
            },
            toolbox: {
              show : true,
              feature : {
                mark : {show: true},
                restore : {show: true},
                saveAsImage : {show: true}
              }
            },
            grid: {
              top: 30
            },
            series : [
              {
                name:'主干道车流量',
                type:'gauge',
                center: ["50%", "58%"],
                min:0,
                max:100,
                splitNumber:10,
                radius: '80%',
                axisLine: {            // 坐标轴线
                  lineStyle: {       // 属性lineStyle控制线条样式
                    color: [[0.09, 'lime'],[0.82, '#1e90ff'],[1, '#ff4500']],
                    width: 3,
                    shadowColor : '#fff', //默认透明
                    shadowBlur: 10
                  }
                },
                axisLabel: {            // 坐标轴小标记
                  textStyle: {       // 属性lineStyle控制线条样式
                    fontWeight: 'bolder',
                    color: '#fff',
                    shadowColor : '#fff', //默认透明
                    shadowBlur: 10
                  }
                },
                axisTick: {            // 坐标轴小标记
                  length :15,        // 属性length控制线长
                  lineStyle: {       // 属性lineStyle控制线条样式
                    color: 'auto',
                    shadowColor : '#fff', //默认透明
                    shadowBlur: 10
                  }
                },
                splitLine: {           // 分隔线
                  length :25,         // 属性length控制线长
                  lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                    width:3,
                    color: '#fff',
                    shadowColor : '#fff', //默认透明
                    shadowBlur: 10
                  }
                },
                pointer: {           // 分隔线
                  shadowColor : '#fff', //默认透明
                  shadowBlur: 5
                },
                title : {
                  textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                    fontWeight: 'bolder',
                    fontSize: 20,
                    fontStyle: 'italic',
                    color: '#fff',
                    shadowColor : '#fff', //默认透明
                    shadowBlur: 10
                  }
                },
                detail : {
                  backgroundColor: 'rgba(30,144,255,0.8)',
                  borderWidth: 1,
                  borderColor: '#fff',
                  shadowColor : '#fff', //默认透明
                  shadowBlur: 5,
                  offsetCenter: [0, '50%'],       // x, y，单位px
                  textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                    fontWeight: 'bolder',
                    color: '#fff'
                  }
                },
                data:[{value: 40}]
              },
            ]
          };
          myChart.setOption(option);
          setInterval(function (){
            option.series[0].data[0].value = (Math.random()*100).toFixed(0) - 0;
            myChart.setOption(option);
          },2000)
        }


      },
      mounted(){
        setInterval(()=>{
          this.getNow()
        },1000)

        this.createChart()
        this.createChart2()
        this.createChart3()
        this.createChart4()
        this.createChart5()
      }

    })
  </script>
</body>
</html>